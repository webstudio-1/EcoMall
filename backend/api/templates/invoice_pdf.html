<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Invoice</title>
  <style>
    body { font-family: DejaVu Sans, Arial, sans-serif; font-size: 12px; color: #222; }
    .header { width: 100%; margin-bottom: 16px; }
    .header td { vertical-align: top; }
    .title { font-size: 20px; font-weight: bold; }
    .meta { color: #555; font-size: 11px; }
    .section-title { font-weight: bold; margin: 10px 0 6px; font-size: 13px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #999; padding: 6px; }
    th { background: #f2f2f2; }
    .right { text-align: right; }
    .center { text-align: center; }
    .no-border td { border: none; }
  </style>
</head>
<body>
  <table class="header">
    <tr class="no-border">
      <td>
        <div class="title">Eco Mall</div>
        <div class="meta">Order ID: {{ order.order_id }}</div>
        {% if order.booked_reference %}<div class="meta">Reference: {{ order.booked_reference }}</div>{% endif %}
        <div class="meta">Date: {{ today }}</div>
      </td>
      <td class="right">
        <div class="meta">Generated by Eco Mall</div>
      </td>
    </tr>
  </table>

  <div class="section-title">Items</div>
  <table>
    <thead>
      <tr>
        <th style="width: 55%">Item</th>
        <th class="center" style="width: 10%">Qty</th>
        <th class="right" style="width: 17%">Unit Price</th>
        <th class="right" style="width: 18%">Amount</th>
      </tr>
    </thead>
    <tbody>
      {% for oi in items %}
      <tr>
        <td>{{ oi.item.item_name }}</td>
        <td class="center">{{ oi.quantity }}</td>
        <td class="right">₹{{ oi.price }}</td>
        <td class="right">₹{{ oi.price|floatformat:2|add:"0"|floatformat:2 }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <table class="no-border" style="margin-top: 12px;">
    <tr class="no-border">
      <td style="width: 60%"></td>
      <td style="width: 40%">
        <table>
          <tr>
            <td>Subtotal</td>
            <td class="right">₹{{ subtotal|floatformat:2 }}</td>
          </tr>
          <tr>
            <td><strong>Total</strong></td>
            <td class="right"><strong>₹{{ order.total_price }}</strong></td>
          </tr>
        </table>
      </td>
    </tr>
  </table>

  <p style="margin-top: 20px; font-size: 11px; color: #666;">
    This is a computer-generated invoice and does not require a signature.
  </p>
</body>
</html>
